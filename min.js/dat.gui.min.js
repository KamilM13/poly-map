import*as THREE from"https://unpkg.com/three@0.166.1/build/three.module.js";import{OrbitControls}from"https://unpkg.com/three@0.166.1/examples/jsm/controls/OrbitControls.js";import{FontLoader}from"https://unpkg.com/three@0.166.1/examples/jsm/loaders/FontLoader.js";import{TextGeometry}from"https://unpkg.com/three@0.166.1/examples/jsm/geometries/TextGeometry.js";class Planet{constructor(e,a,t,r,o){this.radius=e,this.positionX=a,this.positionY=t,this.positionZ=r,this.textureFile=o}getMesh(){if(void 0===this.mesh||null===this.mesh){const e=new THREE.SphereGeometry(this.radius),a=(new THREE.TextureLoader).load(this.textureFile),t=new THREE.MeshBasicMaterial({map:a});this.mesh=new THREE.Mesh(e,t),this.mesh.position.x+=this.positionX,this.mesh.position.y+=this.positionY,this.mesh.position.z+=this.positionZ}return this.mesh}}const renderer=new THREE.WebGLRenderer;renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(renderer.domElement);const scene=new THREE.Scene,textureLoader=new THREE.TextureLoader,starTexture=textureLoader.load("./image/stars.jpg"),cubeTextureLoader=new THREE.CubeTextureLoader,cubeTexture=cubeTextureLoader.load([starTexture,starTexture,starTexture,starTexture,starTexture,starTexture]);scene.background=cubeTexture;const camera=new THREE.PerspectiveCamera(36,window.innerWidth/window.innerHeight,.1,1e3);camera.position.set(100,300,100);const orbit=new OrbitControls(camera,renderer.domElement),material=new THREE.LineBasicMaterial({color:16777215}),config={planets:[{name:"Earth",size:2,x:0,y:0,z:0,texture:"image/earth.png",layer:0},{name:"Alpha Centauri",size:2,x:0,y:20,z:0,texture:"image/alpha_centauri.png",layer:1},{name:"Dionyza's Tear",size:2,x:0,y:20,z:20,texture:"image/alpha_centauri.png",layer:1},{name:"Marus",size:2,x:0,y:20,z:40,texture:"image/alpha_centauri.png",layer:1},{name:"Valeria",size:2,x:20,y:20,z:40,texture:"image/alpha_centauri.png",layer:1},{name:"Cassio",size:2,x:-20,y:20,z:0,texture:"image/alpha_centauri.png",layer:1},{name:"Belarius",size:2,x:-20,y:20,z:-20,texture:"image/alpha_centauri.png",layer:1},{name:"Odin Major",size:2,x:-40,y:20,z:0,texture:"image/valhalla_corp.png",layer:1},{name:"Odin Minor",size:2,x:-40,y:20,z:20,texture:"image/valhalla_corp.png",layer:1},{name:"Grumio",size:2,x:0,y:40,z:20,texture:"image/alpha_centauri.png",layer:2},{name:"Alastor",size:2,x:20,y:40,z:20,texture:"image/alpha_centauri.png",layer:2},{name:"Macedon",size:2,x:20,y:40,z:40,texture:"image/alpha_centauri.png",layer:2},{name:"Cymbeline",size:2,x:20,y:40,z:0,texture:"image/alpha_centauri.png",layer:2},{name:"Scylla",size:2,x:0,y:40,z:0,texture:"image/alpha_centauri.png",layer:2},{name:"Ulysses",size:2,x:20,y:40,z:-20,texture:"image/epsilon_coal.png",layer:2},{name:"Vor Alpha",size:2,x:0,y:40,z:-20,texture:"image/alpha_centauri.png",layer:2},{name:"Cardamom",size:2,x:-40,y:40,z:-20,texture:"image/tau_ceti.png",layer:2},{name:"Lilith",size:2,x:-20,y:40,z:-20,texture:"image/tau_ceti.png",layer:2},{name:"Thor",size:2,x:-40,y:40,z:0,texture:"image/valhalla_corp.png",layer:2},{name:"Archimedes",size:2,x:0,y:60,z:20,texture:"image/alpha_centauri.png",layer:3},{name:"Zephon",size:2,x:0,y:60,z:0,texture:"image/alpha_centauri.png",layer:3},{name:"Szarik",size:2,x:20,y:60,z:40,texture:"image/alpha_centauri.png",layer:3},{name:"Zisa",size:2,x:0,y:60,z:40,texture:"image/alpha_centauri.png",layer:3},{name:"Vor Beta",size:2,x:0,y:60,z:-20,texture:"image/alpha_centauri.png",layer:3},{name:"Anderson",size:2,x:20,y:60,z:0,texture:"image/epsilon_coal.png",layer:3},{name:"Kirby",size:2,x:20,y:60,z:-20,texture:"image/epsilon_coal.png",layer:3},{name:"Blanchard",size:2,x:20,y:60,z:-40,texture:"image/epsilon_coal.png",layer:3},{name:"Tau Ceti",size:2,x:-20,y:60,z:-20,texture:"image/tau_ceti.png",layer:3},{name:"Hinn",size:2,x:-40,y:60,z:0,texture:"image/tau_ceti.png",layer:3},{name:"Gorgon",size:2,x:-40,y:60,z:-20,texture:"image/tau_ceti.png",layer:3},{name:"Forlorn",size:2,x:-20,y:60,z:0,texture:"image/tau_ceti.png",layer:3},{name:"Macroposopus",size:2,x:-40,y:80,z:0,texture:"image/tau_ceti.png",layer:4},{name:"Voltemand",size:2,x:-40,y:80,z:-20,texture:"image/tau_ceti.png",layer:4},{name:"Camel",size:2,x:-40,y:80,z:-40,texture:"image/tau_ceti.png",layer:4},{name:"Shylock",size:2,x:-20,y:80,z:-20,texture:"image/tau_ceti.png",layer:4},{name:"Paxton",size:2,x:0,y:80,z:-20,texture:"image/epsilon_coal.png",layer:4},{name:"Stark",size:2,x:20,y:80,z:-20,texture:"image/epsilon_coal.png",layer:4},{name:"Terill",size:2,x:20,y:80,z:-40,texture:"image/epsilon_coal.png",layer:4},{name:"Willcox",size:2,x:0,y:80,z:-40,texture:"image/epsilon_coal.png",layer:4},{name:"Enobarus",size:2,x:0,y:80,z:20,texture:"image/alpha_centauri.png",layer:4},{name:"Szalik",size:2,x:20,y:80,z:40,texture:"image/alpha_centauri.png",layer:4},{name:"Pajmon",size:2,x:20,y:80,z:20,texture:"image/alpha_centauri.png",layer:4},{name:"Lailah",size:2,x:-40,y:100,z:-40,texture:"image/tau_ceti.png",layer:5},{name:"Saleos",size:2,x:-40,y:100,z:-20,texture:"image/tau_ceti.png",layer:5},{name:"Rind",size:2,x:-20,y:100,z:-20,texture:"image/image/neutral.png",layer:5},{name:"Fester",size:2,x:-20,y:100,z:0,texture:"image/image/neutral.png",layer:5},{name:"Hoxxes",size:2,x:-20,y:100,z:20,texture:"image/image/neutral.png",layer:5},{name:"Destitution",size:2,x:0,y:100,z:0,texture:"image/image/neutral.png",layer:5},{name:"York",size:2,x:20,y:100,z:-20,texture:"image/alpha_centauri.png",layer:5},{name:"Martyr's End",size:2,x:20,y:100,z:0,texture:"image/alpha_centauri.png",layer:5},{name:"Legatus",size:2,x:20,y:100,z:20,texture:"image/alpha_centauri.png",layer:5},{name:"Fantom",size:2,x:20,y:100,z:40,texture:"image/alpha_centauri.png",layer:5},{name:"Visage",size:2,x:-40,y:120,z:-20,texture:"image/tau_ceti.png",layer:6},{name:"Big Bertha",size:2,x:-20,y:120,z:0,texture:"image/neutral.png",layer:6},{name:"Little Bertha",size:2,x:0,y:120,z:0,texture:"image/neutral.png",layer:6},{name:"Benthica",size:2,x:-20,y:120,z:20,texture:"image/neutral.png",layer:6},{name:"Ljubi",size:2,x:-40,y:120,z:20,texture:"image/neutral.png",layer:6},{name:"Maybelline's Cove",size:2,x:-20,y:120,z:-20,texture:"image/neutral.png",layer:6},{name:"Zero",size:2,x:20,y:120,z:0,texture:"image/alpha_centauri.png",layer:6},{name:"Andronicus",size:2,x:20,y:120,z:20,texture:"image/alpha_centauri.png",layer:6},{name:"Jikinki",size:2,x:-40,y:140,z:20,texture:"image/neutral.png",layer:7},{name:"Ziyou",size:2,x:-40,y:140,z:40,texture:"image/neutral.png",layer:7},{name:"Constitution",size:2,x:-20,y:140,z:40,texture:"image/neutral.png",layer:7},{name:"Soothsayer",size:2,x:-20,y:140,z:20,texture:"image/neutral.png",layer:7},{name:"Freedom",size:2,x:0,y:140,z:20,texture:"image/neutral.png",layer:7},{name:"UNKNOWN1",size:2,x:20,y:140,z:20,texture:"image/neutral.png",layer:7},{name:"Flaruos",size:2,x:-20,y:140,z:-20,texture:"image/neutral.png",layer:7},{name:"Mara's Holler",size:2,x:20,y:140,z:-40,texture:"image/neutral.png",layer:7},{name:"Echoes of Mara",size:2,x:20,y:160,z:-40,texture:"image/neutral.png",layer:8},{name:"Strato's Rest",size:2,x:20,y:160,z:-20,texture:"image/neutral.png",layer:8},{name:"Freeport",size:2,x:-20,y:160,z:-20,texture:"image/neutral.png",layer:8},{name:"Calpurnia",size:2,x:0,y:160,z:-20,texture:"image/neutral.png",layer:8},{name:"Tribunal",size:2,x:-40,y:160,z:20,texture:"image/neutral.png",layer:8},{name:"Heimdall",size:2,x:-40,y:160,z:-20,texture:"image/neutral.png",layer:8},{name:"Inshallah",size:2,x:-20,y:160,z:40,texture:"image/neutral.png",layer:8},{name:"Jotunn",size:2,x:-20,y:160,z:20,texture:"image/neutral.png",layer:8},{name:"Omphalos",size:2,x:0,y:160,z:20,texture:"image/neutral.png",layer:8},{name:"UNKNOWN2",size:2,x:0,y:160,z:40,texture:"image/neutral.png",layer:8},{name:"UNKNOWN3",size:2,x:20,y:160,z:20,texture:"image/neutral.png",layer:8},{name:"Beadle",size:2,x:-20,y:180,z:20,texture:"image/neutral.png",layer:9},{name:"UNKNOWN4",size:2,x:-20,y:180,z:40,texture:"image/neutral.png",layer:9},{name:"UNKNOWN5",size:2,x:-40,y:180,z:20,texture:"image/neutral.png",layer:9},{name:"Ra",size:2,x:0,y:180,z:-20,texture:"image/neutral.png",layer:9},{name:"UNKNOWN6",size:2,x:0,y:180,z:0,texture:"image/neutral.png",layer:9},{name:"Hannibal",size:2,x:20,y:180,z:-20,texture:"image/neutral.png",layer:9},{name:"UNKNOWN7",size:2,x:20,y:180,z:-40,texture:"image/neutral.png",layer:9},{name:"Margarelon's Heaven",size:2,x:-40,y:180,z:-20,texture:"image/neutral.png",layer:9},{name:"UNKNOWN8",size:2,x:-40,y:180,z:0,texture:"image/neutral.png",layer:9},{name:"UNKNOWN9",size:2,x:-20,y:180,z:-20,texture:"image/neutral.png",layer:9}],connections:[{from:"Earth",to:"Alpha Centauri"},{from:"Alpha Centauri",to:"Dionyza's Tear"},{from:"Alpha Centauri",to:"Cassio"},{from:"Cassio",to:"Belarius"},{from:"Cassio",to:"Odin Major"},{from:"Odin Major",to:"Odin Minor"},{from:"Dionyza's Tear",to:"Marus"},{from:"Marus",to:"Valeria"},{from:"Odin Major",to:"Thor"},{from:"Odin Minor",to:"Thor"},{from:"Alpha Centauri",to:"Scylla"},{from:"Dionyza's Tear",to:"Grumio"},{from:"Valeria",to:"Macedon"},{from:"Thor",to:"Cardamom"},{from:"Cardamom",to:"Lilith"},{from:"Lilith",to:"Vor Alpha"},{from:"Vor Alpha",to:"Scylla"},{from:"Grumio",to:"Alastor"},{from:"Alastor",to:"Macedon"},{from:"Alastor",to:"Cymbeline"},{from:"Cymbeline",to:"Ulysses"},{from:"Grumio",to:"Archimedes"},{from:"Cymbeline",to:"Anderson"},{from:"Ulysses",to:"Kirby"},{from:"Lilith",to:"Tau Ceti"},{from:"Thor",to:"Hinn"},{from:"Vor Alpha",to:"Vor Beta"},{from:"Kirby",to:"Anderson"},{from:"Hinn",to:"Forlorn"},{from:"Forlorn",to:"Tau Ceti"},{from:"Archimedes",to:"Zisa"},{from:"Archimedes",to:"Zephon"},{from:"Zephon",to:"Anderson"},{from:"Zisa",to:"Szarik"},{from:"Kirby",to:"Blanchard"},{from:"Hinn",to:"Macroposopus"},{from:"Tau Ceti",to:"Shylock"},{from:"Vor Beta",to:"Paxton"},{from:"Kirby",to:"Stark"},{from:"Blanchard",to:"Terill"},{from:"Archimedes",to:"Enobarus"},{from:"Szarik",to:"Szalik"},{from:"Macroposopus",to:"Voltemand"},{from:"Camel",to:"Voltemand"},{from:"Shylock",to:"Voltemand"},{from:"Paxton",to:"Willcox"},{from:"Paxton",to:"Stark"},{from:"Terill",to:"Willcox"},{from:"Terill",to:"Stark"},{from:"Pajmon",to:"Enobarus"},{from:"Pajmon",to:"Szalik"},{from:"Camel",to:"Lailah"},{from:"Voltemand",to:"Saleos"},{from:"Shylock",to:"Rind"},{from:"Stark",to:"York"},{from:"Pajmon",to:"Legatus"},{from:"Szalik",to:"Fantom"},{from:"Saleos",to:"Rind"},{from:"Rind",to:"Fester"},{from:"Fester",to:"Hoxxes"},{from:"Fester",to:"Destitution"},{from:"Destitution",to:"Martyr's End"},{from:"Legatus",to:"Martyr's End"},{from:"York",to:"Martyr's End"},{from:"Saleos",to:"Visage"},{from:"Rind",to:"Maybelline's Cove"},{from:"Fester",to:"Big Bertha"},{from:"Destitution",to:"Little Bertha"},{from:"Martyr's End",to:"Zero"},{from:"Legatus",to:"Andronicus"},{from:"Visage",to:"Maybelline's Cove"},{from:"Maybelline's Cove",to:"Big Bertha"},{from:"Big Bertha",to:"Benthica"},{from:"Benthica",to:"Ljubi"},{from:"Big Bertha",to:"Little Bertha"},{from:"Little Bertha",to:"Zero"},{from:"Maybelline's Cove",to:"Flaruos"},{from:"Benthica",to:"Soothsayer"},{from:"Ljubi",to:"Jikinki"},{from:"Jikinki",to:"Ziyou"},{from:"Ziyou",to:"Constitution"},{from:"Flaruos",to:"Soothsayer"},{from:"Soothsayer",to:"Freedom"},{from:"Freedom",to:"UNKNOWN1"},{from:"Jikinki",to:"Tribunal"},{from:"Constitution",to:"Inshallah"},{from:"Flaruos",to:"Freeport"},{from:"Mara's Holler",to:"Echoes of Mara"},{from:"Freedom",to:"Omphalos"},{from:"Heimdall",to:"Tribunal"},{from:"Tribunal",to:"Jotunn"},{from:"Jotunn",to:"Inshallah"},{from:"Jotunn",to:"Omphalos"},{from:"Omphalos",to:"UNKNOWN2"},{from:"Omphalos",to:"UNKNOWN3"},{from:"Omphalos",to:"Calpurnia"},{from:"Heimdall",to:"Freeport"},{from:"Freeport",to:"Calpurnia"},{from:"Calpurnia",to:"Strato's Rest"},{from:"Strato's Rest",to:"Echoes of Mara"},{from:"Heimdall",to:"Margarelon's Heaven"},{from:"Strato's Rest",to:"Hannibal"},{from:"Calpurnia",to:"Ra"},{from:"Jotunn",to:"Beadle"},{from:"Hannbial",to:"Ra"},{from:"Beadle",to:"UNKNOWN4"},{from:"Beadle",to:"UNKNOWN5"},{from:"Ra",to:"UNKNOWN6"},{from:"Hannibal",to:"UNKNOWN7"},{from:"Margarelon's Heaven",to:"UNKNOWN8"},{from:"Margarelon's Heaven",to:"UNKNOWN9"}]},createPlanet=(e,a,t,r,o,n)=>{const i=new Planet(a,t,r,o,n).getMesh();return i.name=e,i},createLabel=(e,a)=>{(new FontLoader).load("font.json",(function(t){const r=new TextGeometry(e,{font:t,size:20}),o=new THREE.MeshBasicMaterial({color:16777215}),n=new THREE.Mesh(r,o);n.position.set(0,3,0),n.scale.set(.05,.05,.05),n.name="${text}_label",a.add(n),textLabels.push(n)}))},createPlanetsFromConfig=e=>{const a={};return e.planets.forEach((({name:e,size:t,x:r,y:o,z:n,texture:i,layer:m})=>{a[m]||(a[m]=new THREE.Group);const l=createPlanet(e,t,r,o,n,i);var s,u;a[m].add(l),s=e,u=l,(new FontLoader).load("font.json",(function(e){const a=new TextGeometry(s,{font:e,size:20}),t=new THREE.MeshBasicMaterial({color:16777215}),r=new THREE.Mesh(a,t);r.position.set(0,3,0),r.scale.set(.05,.05,.05),r.name="${text}_label",u.add(r),textLabels.push(r)}))})),a},findPlanetMeshByName=(e,a)=>{for(const t of Object.values(e)){const e=t.getObjectByName(a);if(e)return e}return null},createConnectionsFromConfig=(e,a)=>{e.connections.forEach((({from:e,to:t})=>{const r=findPlanetMeshByName(a,e),o=findPlanetMeshByName(a,t);if(r&&o){const e=[new THREE.Vector3(r.position.x,r.position.y,r.position.z),new THREE.Vector3(o.position.x,o.position.y,o.position.z)],a=(new THREE.BufferGeometry).setFromPoints(e),t=new THREE.Line(a,material);r.parent.add(t)}}))},layers=createPlanetsFromConfig(config);createConnectionsFromConfig(config,layers);for(const e of Object.values(layers))scene.add(e);function animate(){textLabels.forEach((e=>{e.lookAt(camera.position)})),renderer.render(scene,camera)}renderer.setAnimationLoop(animate),window.addEventListener("resize",(()=>{camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)}));